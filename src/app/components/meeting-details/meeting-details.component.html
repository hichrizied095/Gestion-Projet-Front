<div class="meeting-details-page">
  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner-border" role="status"></div>
    <p>Chargement...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error && !isLoading" class="alert alert-danger">
    <i class="bi bi-exclamation-triangle"></i>
    {{ error }}
  </div>

  <!-- Content -->
  <div *ngIf="!isLoading && meeting" class="meeting-container">

    <!-- Header Simple -->
    <div class="page-header">
      <button class="btn-back" (click)="navigateBack()">
        <i class="bi bi-arrow-left"></i>
        Retour
      </button>
      <h1>Détails de la Réunion</h1>
    </div>

    <!-- Informations Principales -->
    <div class="info-section">
      <h2>Informations Générales</h2>
      <div class="info-row">
        <span class="label">Projet :</span>
        <span class="value">{{ meeting.projectTitle }}</span>
      </div>
      <div class="info-row">
        <span class="label">Date :</span>
        <span class="value">{{ meeting.meetingDate | date:'EEEE dd MMMM yyyy' }}</span>
      </div>
      <div class="info-row">
        <span class="label">Heure :</span>
        <span class="value">{{ meeting.startTime | slice:0:5 }} - {{ meeting.endTime | slice:0:5 }}</span>
      </div>
      <div class="info-row">
        <span class="label">Durée :</span>
        <span class="value">{{ meeting.durationMinutes }} minutes</span>
      </div>
    </div>

    <!-- Participants -->
    <div class="participants-section">
      <h2>Participants ({{ meeting.attendees?.length || 0 }})</h2>
      <div *ngIf="!meeting.attendees || meeting.attendees.length === 0" class="empty-message">
        Aucun participant
      </div>
      <div *ngIf="meeting.attendees && meeting.attendees.length > 0" class="participants-list">
        <div *ngFor="let attendee of meeting.attendees" class="participant-item">
          <div class="participant-avatar">{{ getInitials(attendee) }}</div>
          <span class="participant-name">{{ attendee.username || attendee }}</span>
        </div>
      </div>
    </div>

    <!-- Tâches Concernées -->
    <div class="tasks-section">
      <h2>Tâches Concernées ({{ tasks.length || 0 }})</h2>
      <div *ngIf="!tasks || tasks.length === 0" class="empty-message">
        Aucune tâche associée
      </div>
      <div *ngIf="tasks && tasks.length > 0" class="tasks-list">
        <div *ngFor="let task of tasks; let i = index" class="task-card">
          <div class="task-header">
            <span class="task-number">#{{ i + 1 }}</span>
            <span class="task-status" [class.completed]="isTaskCompleted(task)">
              {{ getTaskStatus(task) }}
            </span>
          </div>

          <h3 class="task-title">{{ task.title }}</h3>

          <div class="task-info">
            <div class="info-row">
              <span class="label">Description :</span>
              <span class="value">{{ task.description || 'Aucune description' }}</span>
            </div>
            <div class="info-row">
              <span class="label">Assigné à :</span>
              <span class="value">{{ task.assignedUsername || 'Non assigné' }}</span>
            </div>
            <div class="info-row">
              <span class="label">Échéance :</span>
              <span class="value">{{ task.dueDate | date:'dd/MM/yyyy' }}</span>
            </div>
            <div class="info-row">
              <span class="label">Poids dans le projet :</span>
              <span class="value">{{ getTaskWeight(i) }}%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>